name: Pipeline DevOps - Control de Calidad

# Trigger: ¬øCu√°ndo se ejecuta esto?
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

# Jobs: Las tareas a realizar
jobs:
  revision-automatica:
    runs-on: ubuntu-latest  # GitHub nos presta un servidor Ubuntu fresco

    steps:
    # Paso 1: El robot baja tu c√≥digo del repositorio
    - name: Checkout del c√≥digo
      uses: actions/checkout@v3

    # Paso 2: Verificar que no te olvidaste los archivos clave
    - name: Verificar archivos cr√≠ticos
      run: |
        echo "üîç Iniciando auditor√≠a de archivos..."
        if [ -f "index.html" ]; then echo "‚úÖ index.html encontrado"; else echo "‚ùå Faltan index.html"; exit 1; fi
        if [ -f "docker-compose.yml" ]; then echo "‚úÖ docker-compose.yml encontrado"; else echo "‚ùå Faltan docker-compose.yml"; exit 1; fi

    # Paso 3: Validar que el docker-compose est√© bien escrito
    - name: Validar sintaxis de Docker
      run: docker compose config
      # Si el archivo est√° mal escrito, este comando falla y el pipeline se pone rojo.